language: java
jdk:
- openjdk8
cache:
  directories:
  - "$HOME/.m2/repository"
  - "$HOME/.sonar/cache"
env:
  global:
  - secure: Nh0oq2RtKuhACJEk/OZnBMlTdpSN4+lMzuB51DjygBjLAZDUmjS2eFdh+Xnx1D050XIT+qkRi8IkFfY3Q+sZw05VKJ0yZVSs8DGa8jpRXq7LI9SBdcftF6xISsiY9LA/8fVOfUqCHy9VVCzC/lDUIR+kqzfPGd/w67CUE9WCei4uOqdI5i8lb/Yy5Xg5wVp4vhH38umNO43wmUGf0hfVcCutcX+w+Ohe5XDG+88rwH8/FvVgjGYTgVezvTYj228W+ZsIlAd3o/Hiu+QmEfUNY7flo0hGrg8rTQ3ozF+lRjMGA4eas3zcpiGsNv1ZDTgF8gwySSjV2q9NhN4GRRFg+FyjNNAoHy1nF1e5Q5pl1rN2PWUKmhKrbuFeZyzQL38Hzuk9CYFHJn5+6kVC3FMmucaW+3FFKVyYHZf5GnR32ZY66pYAw0c3tHAuU6SrQQcrIpG97EymC4zqvzA+lcIiMzL54mk+Y59XBHUj9/4rmqqOCVTiyDykoHBWCrYmxaAHT/rtXvU5JpiCiqzRAYqZaFHQMkWgX4cy7q3EUp3dRFPxy8A4INZrAH0FN7ejj+K/CEJWUBF0vMojYLFnKQ274Yz7FW8ygupTzGsZ+HMp5WNAmx8x+ZqP9Y/pEKEbekZWJOb6bCiC/3swEQgS9ZIwuNvGL4bCEVn6bK5bNEf8nV8=
  - secure: Rr5WufinBykt5h0wSNm4qoYUtZ2yZg04lVI6ljCTw3HX69lkuQFL6QqscTZKrf7/9qi2Dq/4q2ibfIZ+sxNLVRS8pGkW5W5R/4jDVfPrJF4S2aS73wC50q8rwDNTR0Zo02UfqJIKpeERR7OIZbOg65ebW2d3qRIt87grHo5n+AEke9AFPEvb1EVtXyAwBY2jEPeqth5Zs86IlBpzjhrSbk6VVNhzIMJDRTxtnYGcX7eJ42LOujFTVWgfRkxnydZctfJFQrY4jRseonAQmXXc1Zc7mwO5CuT/H1kX3MLJJjkD4nCijsHeT8lF6Mq6UIMA+YJ7n/E4lNMGbH3pfT/vgPryZXGYQtNbBBaT7r5/2w7WUsihyiA2ne1RFUiA1s6eUns5fLtO3acSA2vzU1n3BDsZbR25yh0hMekvw/A8zRcRz5oXUU6JfwKIKC4yczcaGqkPC/3rOuOL8zLRXatEqV01HvsPYQdNlBr6extn2RWlTjJEkD7LPPO/br8s55FWv6wJQ/ckdPQc3HtJ7hJuoXxM1h5hgjPpdOEeFVdIx4vYFRJQkLU2TiYlVtBJlJESoGaU6UoFBZ0WT3bqjDKw0wqc8OsQZ5GxAlQZffS84MawK1toVzcbP0qPt/WluMLG7db0vU3v5fQtKinWc+Vj5T3VDqz3d1VsdRWqMerW0Tw=
  - secure: sMrBDNRKLZijSQVOpWEgmVxJ6aY4o44lRIMthbW4H7+Xd/ANanv4FBbuJcqgJuTFKv86qhnEhsQDCKOoR1eEJC8Y+A5jzyxeaehhkXKjKETR6whZkcMXsfWqgFJysBJnmWH5FW/PVcV2vvT0BISDaq9Q3u9aIz/MuLG9kbBgw09M0JyOnhllEchVujQcnn4QWeLIUG/bXSckhDBaGhiK2lnqAAF0aRTYoiFi9/LavLNwA926tN13t6Zbe654Zrzf/9OM8cldS9c6ku4d79c+/C/D0BuqnCQwvpl91gVnMIUfhyqjhDJOFbiAtDdsZDuFHd9VQvCyPZ1KVoVJ5hel+c09ySCBiVQbE34xgOJVsjLLPoXo955siIocNgqWmGWRzJmbk0Ww60fITgMskkBNuPM9MT3Rbj9cmf/91U1+incuHo06UG+L/8CFskfsiS1YuU3xXxze899h3thMxoh5cTybNOGxid+7iRZcGE0f6YjCQwesHlHPHWtcR/lirjziYbVN0RJCsYlUncApy0iRe6FZhotoMUbQW/q7Ku4o1SS99Iq0kwX2ZlIC3mInryCKPAdGfuXrEDaI38aUAFbsKnZwnq+eR7WFsCAPZk1G4NrH4sTaUqifv9mUbCsDDJMbiTR7vNNYPM9rJ4coPIr+NZXR0K1c1j+YxijYg7YtLrU=
  - secure: n3am9YTI7XFKMCfRi3VMRsnL4vw7iiTNbe5o7noaJLZFhRIsPhC9dqAdA+1QzYvQ5SI0LuthlQL9o+hiXzXLA9wa/iPvGS7j0e61zlD0LQGVg13uU6AllUhCWlsjS/ajjdfWY88nEzQt0YOmeYjwSFYnI8uTqFOTazDebSP7ET40MYdm6/4n3Lh+cqmW4FLQOX1K+I3df3J+KbsLc2ZNCsPcWspNoGjpZsl1zZBWfcu869ojyw1t5jPn+zF5a9Q6ziOgCabyufsiNmuysvUYsbQ4dm7xJ+7wJYppoG+5mxijEoa7M94nVzUXgopdFnZ0WiOdzr+08dr0k5eoZVOUubihlI3I2GQSZNX4fiQybqtfX3v27r65QSuykjJPM5bVO9EqiqPuxwwfM3dmXoqiQIJAn4SIc5+n2VRLKOYldMXD3ktvQM7jCKBCNy5sF+clcIIR2IGbyV7rqUmve5xXbhOGfgmx7tpyFKddPwJ2LIYpcJqyScmiqqVXfiwlbcYvC47kXUIF8NTxQayu3jkCi1KT9zUAYRIQgqNLfCM6gQUwtlVc/ZLoFt1udwLyMaebf/5YJAd9Jyq3CkFp17qCZgv+hqIbuKWdut2Lyjnz04M5FLB+ZsTyCIv3bJlev31k/BXQG7V5EeAuB8wp4e4wpBf2I2S1CHjUFgo259iDWmc=
addons:
  sonarcloud:
    organization: carml
    token:
      secure: QzT4C0J+twcHInLAaBwPxUWqPpogp/UyAvAYkjS4x9aqupqrCz4JXZuCptGrrBccURM9JvcqY4uH/iOaTF1yiG/TSyhtyNPJhU0nPkhiUzrgqsgxYMCmi90RnaFhYwtDL+iW6hDZnUJg5KKofTtbN2ACT8WZOhHwTN1NSyK95JVQrymQWiDh9mz66Neb6fZSOyniSgsMOv8i5nRyYjj1n58xYwxyFF1HCrifHB0kDaCO5Trf1SlNmJFg6HqxAUQB6iwunc6DkJJRhgEdWPxRIeP2SR1HcR2imOl1TW/DyDOdR20V3KNSAD33gO7K5PIyBW30zoe1ng6JghrUSrTBbrg8v3wNcnc6idpgRmWaHt5/xZGUEPz3UEWPGTKQwOp6+rnRcZx1KhjecSmWumii6PdAHoRYvdP48OH9oQ3t731JmLFmxZyJXVK78OE/yUJlaDZQ/JqDthwv4XCYbkEUV1RB/ZylBLGenF3nuMcNoUoYacCsgVXmckKyyl77NFEkjMjct/NUcBiJ/c5yD9n83ROd+w5EkRkNhVp6Z+utcfJkuXo1dFC0bWM5tOtA+6l34titMrnBpORg7/zKWgPCK9UZRmjvJAwrsiVdVFhytwKOLkHz/NWMpijv1kTvpfHDOoar+XXV3xOqUc9BvlWO0lu8eFfm+3IV13GAWUndAc4=
script:
- mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent package sonar:sonar
before_deploy:
- openssl aes-256-cbc -K $encrypted_81c98acad902_key -iv $encrypted_81c98acad902_iv -in codesigning.asc.enc -out codesigning.asc -d
- gpg --fast-import codesigning.asc
deploy:
  provider: script
  script: cp .travis.settings.xml $HOME/.m2/settings.xml && mvn deploy -P release
  skip_cleanup: true
  on:
    tags: true
